{"version":3,"file":"CustomScenicSpotRecommend.js","sources":["../../../../src/components/CustomScenicSpotRecommend.vue","../../../../uniComponent:/RDovZ3AvMjAyNjAxNi3lpKfov57ml4XmuLjlvq7kv6HlsI_nqIvluo_nmoTorr7orqHkuI7lrp7njrAvdHJpcC1odWItbXAvc3JjL2NvbXBvbmVudHMvQ3VzdG9tU2NlbmljU3BvdFJlY29tbWVuZC52dWU"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { getScenicSpotAPI } from '@/services/home'\r\nimport type { PageParams } from '@/types/global'\r\nimport type { ScenicSpotItem } from '@/types/scenicSpot'\r\nimport { onMounted, ref } from 'vue'\r\n\r\n// 分页参数\r\nconst pageParams: Required<PageParams> = {\r\n  currentPage: 1,\r\n  pageSize: 5,\r\n}\r\nconst scenicSpotList = ref<ScenicSpotItem[]>([])\r\n// 已结束标记\r\nconst finish = ref(false)\r\nconst getHomeScenicSpotRecommendData = async () => {\r\n  // 退出分页判断\r\n  if (finish.value === true) {\r\n    return uni.showToast({ icon: 'none', title: '没有更多数据~' })\r\n  }\r\n  let params = {\r\n    'qp-name-like': searchValue.value,\r\n    ...pageParams\r\n  }\r\n  const res = await getScenicSpotAPI(params)\r\n  // guessList.value = res.result.items\r\n  // 数组追加\r\n  scenicSpotList.value.push(...res.data.list)\r\n  // 分页条件\r\n  if (pageParams.currentPage < res.data.totalPage) {\r\n    // 页码累加\r\n    pageParams.currentPage++\r\n  } else {\r\n    finish.value = true\r\n  }\r\n}\r\nconst searchValue = ref('')\r\n// 重置数据\r\nconst resetData = () => {\r\n  pageParams.currentPage = 1\r\n  scenicSpotList.value = []\r\n  finish.value = false\r\n}\r\n// 组件挂载完毕\r\nonMounted(() => {\r\n  getHomeScenicSpotRecommendData()\r\n})\r\n// 暴露方法\r\ndefineExpose({\r\n  searchValue,\r\n  resetData,\r\n  getMore: getHomeScenicSpotRecommendData,\r\n})\r\n</script>\r\n\r\n<template>\r\n  <view class=\"caption\">\r\n    <text class=\"text\">景点推荐</text>\r\n  </view>\r\n  <view class=\"guess\">\r\n    <navigator class=\"guess-item\" v-for=\"item in scenicSpotList\" :key=\"item.id\"\r\n      :url=\"`/pages/scenicSpotRecommend/scenicSpotRecommend?id=${item.id}`\">\r\n      <image class=\"image\" mode=\"aspectFill\" :src=\"item.coverUrl\"></image>\r\n      <view class=\"name\"> {{ item.name }} </view>\r\n      <view class=\"shortRecommend\">\r\n        <text>{{ item.shortRecommend }}</text>\r\n      </view>\r\n    </navigator>\r\n  </view>\r\n  <view class=\"loading-text\">\r\n    {{ finish ? '没有更多数据~' : '正在加载...' }}\r\n  </view>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n:host {\r\n  display: block;\r\n}\r\n\r\n/* 分类标题 */\r\n.caption {\r\n  display: flex;\r\n  justify-content: center;\r\n  line-height: 1;\r\n  padding: 36rpx 0 40rpx;\r\n  font-size: 32rpx;\r\n  color: #262626;\r\n\r\n  .text {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding: 0 28rpx 0 30rpx;\r\n\r\n    &::before,\r\n    &::after {\r\n      content: '';\r\n      width: 20rpx;\r\n      height: 20rpx;\r\n      background-image: url(@/static/images/bubble.png);\r\n      background-size: contain;\r\n      margin: 0 10rpx;\r\n    }\r\n  }\r\n}\r\n\r\n.guess {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n  padding: 0 20rpx;\r\n\r\n  .guess-item {\r\n    width: 345rpx;\r\n    padding: 24rpx 20rpx 20rpx;\r\n    margin-bottom: 20rpx;\r\n    border-radius: 10rpx;\r\n    overflow: hidden;\r\n    background-color: #fff;\r\n  }\r\n\r\n  .image {\r\n    width: 304rpx;\r\n    height: 304rpx;\r\n  }\r\n\r\n  .name {\r\n    height: 35rpx;\r\n    margin: 10rpx 0;\r\n    font-size: 26rpx;\r\n    color: #262626;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 2;\r\n    -webkit-box-orient: vertical;\r\n  }\r\n\r\n  .price {\r\n    line-height: 1;\r\n    padding-top: 4rpx;\r\n    color: #cf4444;\r\n    font-size: 26rpx;\r\n  }\r\n\r\n  .shortRecommend {\r\n    line-height: 1;\r\n    padding-top: 4rpx;\r\n    color: #978b8b;\r\n    font-size: 26rpx;\r\n  }\r\n\r\n  .small {\r\n    font-size: 80%;\r\n  }\r\n}\r\n\r\n// 加载提示文字\r\n.loading-text {\r\n  text-align: center;\r\n  font-size: 28rpx;\r\n  color: #666;\r\n  padding: 20rpx 0;\r\n}\r\n</style>","import Component from 'D:/gp/2026016-重庆旅游微信小程序的设计与实现/trip-hub-mp/src/components/CustomScenicSpotRecommend.vue'\nwx.createComponent(Component)"],"names":["ref","uni","getScenicSpotAPI","onMounted"],"mappings":";;;;;;;;;AAOA,UAAM,aAAmC;AAAA,MACvC,aAAa;AAAA,MACb,UAAU;AAAA,IAAA;AAEN,UAAA,iBAAiBA,kBAAsB,CAAA,CAAE;AAEzC,UAAA,SAASA,kBAAI,KAAK;AACxB,UAAM,iCAAiC,YAAY;AAE7C,UAAA,OAAO,UAAU,MAAM;AACzB,eAAOC,cAAAA,MAAI,UAAU,EAAE,MAAM,QAAQ,OAAO,WAAW;AAAA,MACzD;AACA,UAAI,SAAS;AAAA,QACX,gBAAgB,YAAY;AAAA,QAC5B,GAAG;AAAA,MAAA;AAEC,YAAA,MAAM,MAAMC,+BAAiB,MAAM;AAGzC,qBAAe,MAAM,KAAK,GAAG,IAAI,KAAK,IAAI;AAE1C,UAAI,WAAW,cAAc,IAAI,KAAK,WAAW;AAEpC,mBAAA;AAAA,MAAA,OACN;AACL,eAAO,QAAQ;AAAA,MACjB;AAAA,IAAA;AAEI,UAAA,cAAcF,kBAAI,EAAE;AAE1B,UAAM,YAAY,MAAM;AACtB,iBAAW,cAAc;AACzB,qBAAe,QAAQ;AACvB,aAAO,QAAQ;AAAA,IAAA;AAGjBG,kBAAAA,UAAU,MAAM;AACiB;IAAA,CAChC;AAEY,WAAA;AAAA,MACX;AAAA,MACA;AAAA,MACA,SAAS;AAAA,IAAA,CACV;;;;;;;;;;;;;;;;;;AClDD,GAAG,gBAAgB,SAAS;"}