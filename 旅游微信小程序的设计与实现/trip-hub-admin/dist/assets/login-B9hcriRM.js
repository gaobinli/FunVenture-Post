import{d as v,s as V,g as _,u as k,h as b,i as T,j as $,k as C,v as U,l as j,m as z,E as u,n as B,_ as L,r,c as N,o as P,a as o,t as c,b as l,w as i,p as R,e as S}from"./index-BrpxYkzO.js";import{c as E}from"./index-BlucuoM0.js";const q=""+new URL("left-BPO_qFHD.jpg",import.meta.url).href,A=v({components:{selectLang:V,CircleCheck:E},setup(){const e=_(),s=k(),w=b(),n=T({name:"admin",password:"123456",code:"1234",uuid:"",loading:!1});$(()=>{p()});const d=C("password");let g=C("");const m=()=>{d.value===""?d.value="password":d.value=""},f=()=>new Promise((t,h)=>{if(n.name===""){u.warning({message:"用户名不能为空",type:"warning"});return}if(n.password===""){u.warning({message:"密码不能为空",type:"warning"});return}if(n.code===""){u.warning({message:"验证码不能为空",type:"warning"});return}t(!0)}),y=()=>{f().then(()=>{n.loading=!0;let t={username:n.name,password:n.password,code:n.code,uuid:n.uuid};e.dispatch("user/login",t).then(async h=>{u.success({message:"登录成功",type:"success",showClose:!0,duration:1e3}),setTimeout(()=>{location.reload(),B(),s.push(w.query.redirect||"/")},500)}).finally(()=>{n.loading=!1})})},p=()=>{U().then(t=>{g.value="data:image/gif;base64,"+t.data.img,n.uuid=t.data.uuid})};return{loginLeftPng:q,systemTitle:z,systemSubTitle:j,form:n,passwordType:d,codeUrl:g,passwordTypeChange:m,submit:y,changeVerificationCode:p}}}),D={class:"container"},F={class:"box"},M={class:"login-content-left"},H=["src"],I={class:"login-content-left-mask"},O={class:"box-inner"},G={class:"verification-code"},J=["src"],K={class:"fixed-top-right"};function Q(e,s,w,n,d,g){const m=r("el-input"),f=r("CircleCheck"),y=r("el-icon"),p=r("el-button"),t=r("el-form"),h=r("select-lang");return P(),N("div",D,[o("div",F,[o("div",M,[o("img",{src:e.loginLeftPng},null,8,H),o("div",I,[o("div",null,c(e.$t(e.systemTitle)),1),o("div",null,c(e.$t(e.systemSubTitle)),1)])]),o("div",O,[o("h1",null,c(e.$t("message.system.welcome")),1),l(t,{class:"form"},{default:i(()=>[l(m,{size:"large",modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=a=>e.form.name=a),placeholder:e.$t("message.system.userName"),type:"text",maxlength:"50"},{prepend:i(()=>[...s[5]||(s[5]=[o("i",{class:"sfont system-xingmingyonghumingnicheng"},null,-1)])]),_:1},8,["modelValue","placeholder"]),l(m,{size:"large",ref:"password",modelValue:e.form.password,"onUpdate:modelValue":s[2]||(s[2]=a=>e.form.password=a),type:e.passwordType,placeholder:e.$t("message.system.password"),name:"password",maxlength:"50"},{prepend:i(()=>[...s[6]||(s[6]=[o("i",{class:"sfont system-mima"},null,-1)])]),append:i(()=>[o("i",{class:R(["sfont password-icon",e.passwordType?"system-yanjing-guan":"system-yanjing"]),onClick:s[1]||(s[1]=(...a)=>e.passwordTypeChange&&e.passwordTypeChange(...a))},null,2)]),_:1},8,["modelValue","type","placeholder"]),o("div",G,[l(m,{size:"large",ref:"code",modelValue:e.form.code,"onUpdate:modelValue":s[3]||(s[3]=a=>e.form.code=a),type:e.code,placeholder:e.$t("message.system.verificationCode"),name:"code",maxlength:"30"},{prepend:i(()=>[l(y,null,{default:i(()=>[l(f)]),_:1})]),_:1},8,["modelValue","type","placeholder"]),o("img",{src:e.codeUrl,onClick:s[4]||(s[4]=(...a)=>e.changeVerificationCode&&e.changeVerificationCode(...a)),class:"login-code-img"},null,8,J)]),l(p,{type:"primary",loading:e.form.loading,onClick:e.submit,style:{width:"100%"},size:"medium"},{default:i(()=>[S(c(e.$t("message.system.login")),1)]),_:1},8,["loading","onClick"])]),_:1}),o("div",K,[l(h)])])])])}const Y=L(A,[["render",Q],["__scopeId","data-v-b44b0650"]]);export{Y as default};
