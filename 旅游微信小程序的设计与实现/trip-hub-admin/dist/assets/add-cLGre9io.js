import{d as q,k as i,i as S,N as R,u as $,E as w,g as F,h as z,_ as N,c as m,o as p,b as o,w as a,a as c,r as n,e as h}from"./index-BrpxYkzO.js";import{b as O}from"./scenicSpot-CbD-Hf2l.js";import{_ as P}from"./vue3-tinymce.es-B5l2m7-U.js";import{u as T}from"./index-BlucuoM0.js";import{s as j,a as B,b as E}from"./Search-hOF0ZlMh.js";const C="http://127.0.0.1:9000",D=q({name:"crudTable",components:{Vue3Tinymce:P,UploadFilled:T},setup(){const e=$();F(),z();const l=i(null);let d=i({id:"",name:"",url:"",address:"",introduce:"",price:"",coverUrl:"",shortRecommend:"",inventory:"",library:""});const y={id:[{required:!0,message:"请输入主键",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],url:[{required:!0,message:"请输入景点导航图",trigger:"blur"}],coverUrl:[{required:!0,message:"请上传景点封面图",trigger:"blur"}],address:[{required:!0,message:"请输入景点地址",trigger:"blur"}],introduce:[{required:!0,message:"请输入景点介绍",trigger:"blur"}],price:[{required:!0,message:"请输入门票价格",trigger:"blur"}],shortRecommend:[{required:!0,message:"请输入简单推荐",trigger:"blur"}],inventory:[{required:!0,message:"请输入库存",trigger:"blur"}],library:[{required:!0,message:"请输入分类",trigger:"blur"}]},k=i([]),V=i([]),u=i([]),s=i([]);let f=C+"/upload";const g=()=>{e.push({path:"/scenicSpot"})},b=()=>{l&&l.value.validate(t=>{if(t)O(d.value).then(r=>{w({type:"success",message:"添加成功"}),e.push({path:"/scenicSpot"})});else return!1})},_=S({setting:{language:"zh-Hans",height:400,toolbar:"undo redo | fullscreen | blocks alignleft aligncenter alignright alignjustify | link unlink | numlist bullist | image media table | fontsize forecolor backcolor | bold italic underline strikethrough |",toolbar_mode:"sliding",quickbars_selection_toolbar:"removeformat | bold italic underline strikethrough | fontsize forecolor backcolor",plugins:"link image media table lists fullscreen quickbars",font_size_formats:"12px 14px 16px 18px",link_default_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,custom_images_upload:!0,images_upload_url:C+"/upload",custom_images_upload_callback:t=>t.data,custom_images_upload_param:{}}});return{Plus:E,Search:B,Delete:j,close:g,handleTime:R,form:d,rules:y,state:_,provinceOptions:k,classificationOptions:V,sujectOptions:u,yearOptions:s,addForm:b,ruleForm:l,uploadPath:f,handleUploadSuccess:(t,r)=>{d.value.url=t.data},handleUploadSuccessCover:(t,r)=>{d.value.coverUrl=t.data}}}}),H={class:"layout-container"},I=["src"],L={key:1},M=["src"],A={key:1};function G(e,l,d,y,k,V){const u=n("el-input"),s=n("el-form-item"),f=n("el-input-number"),g=n("upload-filled"),b=n("el-icon"),_=n("el-upload"),U=n("vue3-tinymce"),v=n("el-button"),t=n("el-form");return p(),m("div",H,[o(t,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:a(()=>[o(s,{label:"景点名称：",prop:"name"},{default:a(()=>[o(u,{modelValue:e.form.name,"onUpdate:modelValue":l[0]||(l[0]=r=>e.form.name=r),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),o(s,{label:"门票价格：",prop:"price"},{default:a(()=>[o(f,{modelValue:e.form.price,"onUpdate:modelValue":l[1]||(l[1]=r=>e.form.price=r),min:1,max:99999,onChange:e.handleChange},null,8,["modelValue","onChange"])]),_:1}),o(s,{label:"库存：",prop:"inventory"},{default:a(()=>[o(f,{modelValue:e.form.inventory,"onUpdate:modelValue":l[2]||(l[2]=r=>e.form.inventory=r),min:0,max:999999},null,8,["modelValue"])]),_:1}),o(s,{label:"分类：",prop:"library"},{default:a(()=>[o(u,{modelValue:e.form.library,"onUpdate:modelValue":l[3]||(l[3]=r=>e.form.library=r),placeholder:"请输入分类"},null,8,["modelValue"])]),_:1}),o(s,{label:"景点地址：",prop:"address"},{default:a(()=>[o(u,{modelValue:e.form.address,"onUpdate:modelValue":l[4]||(l[4]=r=>e.form.address=r),placeholder:"请输入景点地址"},null,8,["modelValue"])]),_:1}),o(s,{label:"简单推荐：",prop:"shortRecommend"},{default:a(()=>[o(u,{modelValue:e.form.shortRecommend,"onUpdate:modelValue":l[5]||(l[5]=r=>e.form.shortRecommend=r),placeholder:"请输入简单推荐"},null,8,["modelValue"])]),_:1}),o(s,{label:"景点封面图：",prop:"coverUrl"},{default:a(()=>[o(_,{class:"upload-demo",drag:"",action:e.uploadPath,multiple:"false","on-success":e.handleUploadSuccessCover,"show-file-list":!1},{default:a(()=>[e.form.coverUrl?(p(),m("img",{key:0,src:e.form.coverUrl,class:"avatar",style:{widht:"148px",height:"148px"}},null,8,I)):(p(),m("span",L,[o(b,{class:"el-icon--upload"},{default:a(()=>[o(g)]),_:1}),l[7]||(l[7]=c("div",{class:"el-upload__text"},[h(" 拖动图片或 "),c("em",null,"点击上传")],-1))]))]),_:1},8,["action","on-success"])]),_:1}),o(s,{label:"景点导航图：",prop:"url"},{default:a(()=>[o(_,{class:"upload-demo",drag:"",action:e.uploadPath,multiple:"false","on-success":e.handleUploadSuccess,"show-file-list":!1},{default:a(()=>[e.form.url?(p(),m("img",{key:0,src:e.form.url,class:"avatar",style:{widht:"148px",height:"148px"}},null,8,M)):(p(),m("span",A,[o(b,{class:"el-icon--upload"},{default:a(()=>[o(g)]),_:1}),l[8]||(l[8]=c("div",{class:"el-upload__text"},[h(" 拖动图片或 "),c("em",null,"点击上传")],-1))]))]),_:1},8,["action","on-success"])]),_:1}),o(s,{label:"景点介绍：",prop:"introduce"},{default:a(()=>[o(U,{modelValue:e.form.introduce,"onUpdate:modelValue":l[6]||(l[6]=r=>e.form.introduce=r),setting:e.state.setting,"script-src":"/tinymce/tinymce.min.js"},null,8,["modelValue","setting"])]),_:1}),c("div",null,[o(v,{type:"primary",onClick:e.addForm},{default:a(()=>[...l[9]||(l[9]=[h("确认",-1)])]),_:1},8,["onClick"]),o(v,{onClick:e.close},{default:a(()=>[...l[10]||(l[10]=[h("返回",-1)])]),_:1},8,["onClick"])])]),_:1},8,["model","rules"])])}const Y=N(D,[["render",G],["__scopeId","data-v-b2a3051c"]]);export{Y as default};
