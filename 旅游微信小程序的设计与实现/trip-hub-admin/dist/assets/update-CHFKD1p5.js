import{d as S,k as i,h as $,i as w,N as F,u as z,E as N,g as O,_ as P,c as p,o as c,b as o,w as r,a as f,r as d,e as k}from"./index-BrpxYkzO.js";import{o as T,u as j}from"./scenicSpot-CbD-Hf2l.js";import{_ as B}from"./vue3-tinymce.es-B5l2m7-U.js";import{u as E}from"./index-BlucuoM0.js";import{s as D,a as H,b as I}from"./Search-hOF0ZlMh.js";const R="http://127.0.0.1:9000",L=S({name:"crudTable",components:{Vue3Tinymce:B,UploadFilled:E},setup(){const e=z();O();const l=i(null),U=$();let a=i({id:"",name:"",url:"",address:"",introduce:"",price:"",coverUrl:"",shortRecommend:"",inventory:""});const V={id:[{required:!0,message:"请输入主键",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],url:[{required:!0,message:"请输入景点导航图",trigger:"blur"}],coverUrl:[{required:!0,message:"请上传景点封面图",trigger:"blur"}],address:[{required:!0,message:"请输入景点地址",trigger:"blur"}],introduce:[{required:!0,message:"请输入景点介绍",trigger:"blur"}],price:[{required:!0,message:"请输入门票价格",trigger:"blur"}],shortRecommend:[{required:!0,message:"请输入简单推荐",trigger:"blur"}],inventory:[{required:!0,message:"请输入库存",trigger:"blur"}]},C=i([]),m=i([]),n=i([]),g=i([]);let _=R+"/upload";v();function v(){const u=U.query.id;u&&T(u).then(t=>{console.log(t),a.value.id=t.data.id,a.value.name=t.data.name,a.value.url=t.data.url,a.value.address=t.data.address,a.value.introduce=t.data.introduce,a.value.price=t.data.price,a.value.coverUrl=t.data.coverUrl,a.value.shortRecommend=t.data.shortRecommend,a.value.inventory=t.data.inventory})}const b=()=>{e.push({path:"/scenicSpot"})},y=()=>{l&&l.value.validate(u=>{if(u)j(a.value.id,a.value).then(t=>{N({type:"success",message:"修改成功"}),e.push({path:"/scenicSpot"})});else return!1})},h=w({setting:{language:"zh-Hans",height:400,toolbar:"undo redo | fullscreen | blocks alignleft aligncenter alignright alignjustify | link unlink | numlist bullist | image media table | fontsize forecolor backcolor | bold italic underline strikethrough |",toolbar_mode:"sliding",quickbars_selection_toolbar:"removeformat | bold italic underline strikethrough | fontsize forecolor backcolor",plugins:"link image media table lists fullscreen quickbars",font_size_formats:"12px 14px 16px 18px",link_default_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,custom_images_upload:!0,images_upload_url:R+"/upload",custom_images_upload_callback:u=>u.data,custom_images_upload_param:{}}});return{Plus:I,Search:H,Delete:D,close:b,handleTime:F,form:a,rules:V,state:h,provinceOptions:C,classificationOptions:m,sujectOptions:n,yearOptions:g,addForm:y,ruleForm:l,uploadPath:_,handleUploadSuccess:(u,t)=>{a.value.url=u.data},handleUploadSuccessCover:(u,t)=>{a.value.coverUrl=u.data}}}}),M={class:"layout-container"},A=["src"],G={key:1},J=["src"],K={key:1};function Q(e,l,U,a,V,C){const m=d("el-input"),n=d("el-form-item"),g=d("upload-filled"),_=d("el-icon"),v=d("el-upload"),b=d("el-input-number"),y=d("vue3-tinymce"),h=d("el-button"),q=d("el-form");return c(),p("div",M,[o(q,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:r(()=>[o(n,{label:"景点名称：",prop:"name"},{default:r(()=>[o(m,{modelValue:e.form.name,"onUpdate:modelValue":l[0]||(l[0]=s=>e.form.name=s),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),o(n,{label:"景点封面图：",prop:"coverUrl"},{default:r(()=>[o(v,{class:"upload-demo",drag:"",action:e.uploadPath,multiple:"false","on-success":e.handleUploadSuccessCover,"show-file-list":!1},{default:r(()=>[e.form.coverUrl?(c(),p("img",{key:0,src:e.form.coverUrl,class:"avatar",style:{widht:"148px",height:"148px"}},null,8,A)):(c(),p("span",G,[o(_,{class:"el-icon--upload"},{default:r(()=>[o(g)]),_:1}),l[6]||(l[6]=f("div",{class:"el-upload__text"},[k(" 拖动图片或 "),f("em",null,"点击上传")],-1))]))]),_:1},8,["action","on-success"])]),_:1}),o(n,{label:"景点导航图：",prop:"url"},{default:r(()=>[o(v,{class:"upload-demo",drag:"",action:e.uploadPath,multiple:"false","on-success":e.handleUploadSuccess,"show-file-list":!1},{default:r(()=>[e.form.url?(c(),p("img",{key:0,src:e.form.url,class:"avatar",style:{widht:"148px",height:"148px"}},null,8,J)):(c(),p("span",K,[o(_,{class:"el-icon--upload"},{default:r(()=>[o(g)]),_:1}),l[7]||(l[7]=f("div",{class:"el-upload__text"},[k(" 拖动图片或 "),f("em",null,"点击上传")],-1))]))]),_:1},8,["action","on-success"])]),_:1}),o(n,{label:"景点地址：",prop:"address"},{default:r(()=>[o(m,{modelValue:e.form.address,"onUpdate:modelValue":l[1]||(l[1]=s=>e.form.address=s),placeholder:"请输入景点地址"},null,8,["modelValue"])]),_:1}),o(n,{label:"门票价格：",prop:"price"},{default:r(()=>[o(b,{modelValue:e.form.price,"onUpdate:modelValue":l[2]||(l[2]=s=>e.form.price=s),min:1,max:99999,onChange:e.handleChange},null,8,["modelValue","onChange"])]),_:1}),o(n,{label:"库存：",prop:"inventory"},{default:r(()=>[o(b,{modelValue:e.form.inventory,"onUpdate:modelValue":l[3]||(l[3]=s=>e.form.inventory=s),min:0,max:999999},null,8,["modelValue"])]),_:1}),o(n,{label:"简单推荐：",prop:"shortRecommend"},{default:r(()=>[o(m,{modelValue:e.form.shortRecommend,"onUpdate:modelValue":l[4]||(l[4]=s=>e.form.shortRecommend=s),placeholder:"请输入简单推荐"},null,8,["modelValue"])]),_:1}),o(n,{label:"景点介绍：",prop:"introduce"},{default:r(()=>[o(y,{modelValue:e.form.introduce,"onUpdate:modelValue":l[5]||(l[5]=s=>e.form.introduce=s),setting:e.state.setting,"script-src":"/tinymce/tinymce.min.js"},null,8,["modelValue","setting"])]),_:1}),f("div",null,[o(h,{type:"primary",onClick:e.addForm},{default:r(()=>[...l[8]||(l[8]=[k("确认",-1)])]),_:1},8,["onClick"]),o(h,{onClick:e.close},{default:r(()=>[...l[9]||(l[9]=[k("返回",-1)])]),_:1},8,["onClick"])])]),_:1},8,["model","rules"])])}const ee=P(L,[["render",Q],["__scopeId","data-v-437dd746"]]);export{ee as default};
