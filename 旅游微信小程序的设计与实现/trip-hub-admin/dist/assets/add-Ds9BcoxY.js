import{d as C,k as i,i as $,N as R,u as w,E as F,g as S,_ as z,c as b,o as _,b as o,w as a,a as h,r as n,e as y}from"./index-BrpxYkzO.js";import{b as N}from"./hotel-DdejCOdd.js";import{_ as O}from"./vue3-tinymce.es-B5l2m7-U.js";import{u as T}from"./index-BlucuoM0.js";import{s as j,a as B,b as E}from"./Search-hOF0ZlMh.js";const q="http://127.0.0.1:9000",P=C({name:"crudTable",components:{Vue3Tinymce:O,UploadFilled:T},setup(){const e=w();S();const l=i(null);let d=i({id:"",url:"",name:"",price:"",content:"",shortRecommend:"",address:"",inventory:"",library:""});const V={url:[{required:!0,message:"请输入封面",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}],content:[{required:!0,message:"请输入详情内容",trigger:"blur"}],shortRecommend:[{required:!0,message:"请输入简要介绍内容",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}],inventory:[{required:!0,message:"请输入库存",trigger:"blur"}],library:[{required:!0,message:"请输入分类",trigger:"blur"}]},k=i([]),v=i([]),u=i([]),t=i([]);let m=q+"/upload";const p=()=>{e.push({path:"/hotel/hotel"})},c=()=>{l&&l.value.validate(s=>{if(s)N(d.value).then(g=>{F({type:"success",message:"添加成功"}),e.push({path:"/hotel"})});else return!1})},f=$({setting:{language:"zh-Hans",height:400,toolbar:"undo redo | fullscreen | blocks alignleft aligncenter alignright alignjustify | link unlink | numlist bullist | image media table | fontsize forecolor backcolor | bold italic underline strikethrough |",toolbar_mode:"sliding",quickbars_selection_toolbar:"removeformat | bold italic underline strikethrough | fontsize forecolor backcolor",plugins:"link image media table lists fullscreen quickbars",font_size_formats:"12px 14px 16px 18px",link_default_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,custom_images_upload:!0,images_upload_url:q+"/upload",custom_images_upload_callback:s=>s.data,custom_images_upload_param:{}}});return{Plus:E,Search:B,Delete:j,close:p,handleTime:R,form:d,rules:V,state:f,provinceOptions:k,classificationOptions:v,sujectOptions:u,yearOptions:t,addForm:c,ruleForm:l,uploadPath:m,handleUploadSuccess:(s,g)=>{d.value.url=s.data}}}}),D={class:"layout-container"},H=["src"],I={key:1};function L(e,l,d,V,k,v){const u=n("el-input"),t=n("el-form-item"),m=n("el-input-number"),p=n("upload-filled"),c=n("el-icon"),f=n("el-upload"),U=n("vue3-tinymce"),s=n("el-button"),g=n("el-form");return _(),b("div",D,[o(g,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:a(()=>[o(t,{label:"酒店名称：",prop:"name"},{default:a(()=>[o(u,{modelValue:e.form.name,"onUpdate:modelValue":l[0]||(l[0]=r=>e.form.name=r),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),o(t,{label:"简要介绍：",prop:"shortRecommend"},{default:a(()=>[o(u,{modelValue:e.form.shortRecommend,"onUpdate:modelValue":l[1]||(l[1]=r=>e.form.shortRecommend=r),placeholder:"请输入简要介绍"},null,8,["modelValue"])]),_:1}),o(t,{label:"酒店地址：",prop:"address"},{default:a(()=>[o(u,{modelValue:e.form.address,"onUpdate:modelValue":l[2]||(l[2]=r=>e.form.address=r),placeholder:"请输入酒店地址"},null,8,["modelValue"])]),_:1}),o(t,{label:"价格：",prop:"price"},{default:a(()=>[o(m,{modelValue:e.form.price,"onUpdate:modelValue":l[3]||(l[3]=r=>e.form.price=r),min:1,max:99999,onChange:e.handleChange},null,8,["modelValue","onChange"])]),_:1}),o(t,{label:"库存：",prop:"inventory"},{default:a(()=>[o(m,{modelValue:e.form.inventory,"onUpdate:modelValue":l[4]||(l[4]=r=>e.form.inventory=r),min:0,max:999999},null,8,["modelValue"])]),_:1}),o(t,{label:"分类：",prop:"library"},{default:a(()=>[o(u,{modelValue:e.form.library,"onUpdate:modelValue":l[5]||(l[5]=r=>e.form.library=r),placeholder:"请输入分类"},null,8,["modelValue"])]),_:1}),o(t,{label:"酒店封面：",prop:"url"},{default:a(()=>[o(f,{class:"upload-demo",drag:"",action:e.uploadPath,multiple:"false","on-success":e.handleUploadSuccess,"show-file-list":!1},{default:a(()=>[e.form.url?(_(),b("img",{key:0,src:e.form.url,class:"avatar",style:{widht:"148px",height:"148px"}},null,8,H)):(_(),b("span",I,[o(c,{class:"el-icon--upload"},{default:a(()=>[o(p)]),_:1}),l[7]||(l[7]=h("div",{class:"el-upload__text"},[y(" 拖动图片或 "),h("em",null,"点击上传")],-1))]))]),_:1},8,["action","on-success"])]),_:1}),o(t,{label:"详情内容：",prop:"content"},{default:a(()=>[o(U,{modelValue:e.form.content,"onUpdate:modelValue":l[6]||(l[6]=r=>e.form.content=r),setting:e.state.setting,"script-src":"/tinymce/tinymce.min.js"},null,8,["modelValue","setting"])]),_:1}),h("div",null,[o(s,{type:"primary",onClick:e.addForm},{default:a(()=>[...l[8]||(l[8]=[y("确认",-1)])]),_:1},8,["onClick"]),o(s,{onClick:e.close},{default:a(()=>[...l[9]||(l[9]=[y("返回",-1)])]),_:1},8,["onClick"])])]),_:1},8,["model","rules"])])}const Q=z(P,[["render",L],["__scopeId","data-v-bb856a81"]]);export{Q as default};
