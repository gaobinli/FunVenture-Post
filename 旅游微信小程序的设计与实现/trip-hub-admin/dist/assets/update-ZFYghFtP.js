import{d as R,k as d,h as $,i as w,N as F,u as S,E as z,g as N,_ as O,c as h,o as v,b as a,w as r,a as y,r as u,e as V}from"./index-BrpxYkzO.js";import{o as T,u as j}from"./hotel-DdejCOdd.js";import{_ as B}from"./vue3-tinymce.es-B5l2m7-U.js";import{u as E}from"./index-BlucuoM0.js";import{s as P,a as D,b as H}from"./Search-hOF0ZlMh.js";const C="http://127.0.0.1:9000",I=R({name:"crudTable",components:{Vue3Tinymce:B,UploadFilled:E},setup(){const e=S();N();const l=$(),m=d(null);let t=d({id:"",url:"",name:"",price:"",content:"",shortRecommend:"",address:"",inventory:"",library:""});const k={url:[{required:!0,message:"请输入封面",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}],content:[{required:!0,message:"请输入详情内容",trigger:"blur"}],shortRecommend:[{required:!0,message:"请输入简要介绍内容",trigger:"blur"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}],inventory:[{required:!0,message:"请输入库存",trigger:"blur"}],library:[{required:!0,message:"请输入分类",trigger:"blur"}]},U=d([]),i=d([]),s=d([]),p=d([]);let f=C+"/upload";g();function g(){const o=l.query.id;o&&T(o).then(n=>{console.log(n),t.value.id=n.data.id,t.value.url=n.data.url,t.value.name=n.data.name,t.value.price=n.data.price,t.value.content=n.data.content,t.value.shortRecommend=n.data.shortRecommend,t.value.address=n.data.address,t.value.inventory=n.data.inventory,t.value.library=n.data.library})}const b=()=>{e.push({path:"/hotel/hotel"})},_=()=>{m&&m.value.validate(o=>{if(o)j(t.value.id,t.value).then(n=>{z({type:"success",message:"修改成功"}),e.push({path:"/hotel"})});else return!1})},c=w({setting:{language:"zh-Hans",height:400,toolbar:"undo redo | fullscreen | blocks alignleft aligncenter alignright alignjustify | link unlink | numlist bullist | image media table | fontsize forecolor backcolor | bold italic underline strikethrough |",toolbar_mode:"sliding",quickbars_selection_toolbar:"removeformat | bold italic underline strikethrough | fontsize forecolor backcolor",plugins:"link image media table lists fullscreen quickbars",font_size_formats:"12px 14px 16px 18px",link_default_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,custom_images_upload:!0,images_upload_url:C+"/upload",custom_images_upload_callback:o=>o.data,custom_images_upload_param:{}}});return{Plus:H,Search:D,Delete:P,close:b,handleTime:F,form:t,rules:k,state:c,provinceOptions:U,classificationOptions:i,sujectOptions:s,yearOptions:p,addForm:_,ruleForm:m,uploadPath:f,handleUploadSuccess:(o,n)=>{t.value.url=o.data}}}}),L={class:"layout-container"},M=["src"],A={key:1};function G(e,l,m,t,k,U){const i=u("el-input"),s=u("el-form-item"),p=u("el-input-number"),f=u("upload-filled"),g=u("el-icon"),b=u("el-upload"),_=u("vue3-tinymce"),c=u("el-button"),q=u("el-form");return v(),h("div",L,[a(q,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:r(()=>[a(s,{label:"酒店名称：",prop:"name"},{default:r(()=>[a(i,{modelValue:e.form.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.form.name=o),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),a(s,{label:"简要介绍：",prop:"shortRecommend"},{default:r(()=>[a(i,{modelValue:e.form.shortRecommend,"onUpdate:modelValue":l[1]||(l[1]=o=>e.form.shortRecommend=o),placeholder:"请输入简要介绍"},null,8,["modelValue"])]),_:1}),a(s,{label:"酒店地址：",prop:"address"},{default:r(()=>[a(i,{modelValue:e.form.address,"onUpdate:modelValue":l[2]||(l[2]=o=>e.form.address=o),placeholder:"请输入酒店地址"},null,8,["modelValue"])]),_:1}),a(s,{label:"价格：",prop:"price"},{default:r(()=>[a(p,{modelValue:e.form.price,"onUpdate:modelValue":l[3]||(l[3]=o=>e.form.price=o),min:1,max:99999,onChange:e.handleChange},null,8,["modelValue","onChange"])]),_:1}),a(s,{label:"库存：",prop:"inventory"},{default:r(()=>[a(p,{modelValue:e.form.inventory,"onUpdate:modelValue":l[4]||(l[4]=o=>e.form.inventory=o),min:0,max:999999},null,8,["modelValue"])]),_:1}),a(s,{label:"分类：",prop:"library"},{default:r(()=>[a(i,{modelValue:e.form.library,"onUpdate:modelValue":l[5]||(l[5]=o=>e.form.library=o),placeholder:"请输入分类"},null,8,["modelValue"])]),_:1}),a(s,{label:"酒店封面：",prop:"url"},{default:r(()=>[a(b,{class:"upload-demo",drag:"",action:e.uploadPath,multiple:"false","on-success":e.handleUploadSuccess,"show-file-list":!1},{default:r(()=>[e.form.url?(v(),h("img",{key:0,src:e.form.url,class:"avatar",style:{widht:"148px",height:"148px"}},null,8,M)):(v(),h("span",A,[a(g,{class:"el-icon--upload"},{default:r(()=>[a(f)]),_:1}),l[7]||(l[7]=y("div",{class:"el-upload__text"},[V(" 拖动图片或 "),y("em",null,"点击上传")],-1))]))]),_:1},8,["action","on-success"])]),_:1}),a(s,{label:"详情内容：",prop:"content"},{default:r(()=>[a(_,{modelValue:e.form.content,"onUpdate:modelValue":l[6]||(l[6]=o=>e.form.content=o),setting:e.state.setting,"script-src":"/tinymce/tinymce.min.js"},null,8,["modelValue","setting"])]),_:1}),y("div",null,[a(c,{type:"primary",onClick:e.addForm},{default:r(()=>[...l[8]||(l[8]=[V("确认",-1)])]),_:1},8,["onClick"]),a(c,{onClick:e.close},{default:r(()=>[...l[9]||(l[9]=[V("返回",-1)])]),_:1},8,["onClick"])])]),_:1},8,["model","rules"])])}const Y=O(I,[["render",G],["__scopeId","data-v-59dd1cc5"]]);export{Y as default};
